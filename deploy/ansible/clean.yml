---
- name: Clean HLS Files and Recordings
  hosts: all
  become: yes

  tasks:
    - name: Remove all files from HLS directory
      shell: find /var/www/html/hls -type f -delete
      changed_when: true
      register: hls_cleanup

    - name: Remove all files from processed HLS directory
      shell: find /var/www/html/annotations -type f -delete
      changed_when: true
      register: annotations_cleanup
      ignore_errors: yes

    - name: Display cleanup summary
      debug:
        msg:
          - "Cleanup completed successfully"
          - "- HLS directory cleaned: /var/www/html/hls"
          - "- Annotations directory cleaned: /var/www/html/annotations"
          - "Note: Directories have been preserved, only files were removed"

